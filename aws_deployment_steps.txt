Here are the steps to deploy your website to an AWS EC2 Ubuntu instance:

**1. Prerequisites:**

*   An AWS account.
*   A created EC2 Ubuntu instance (free tier is fine).
*   Your EC2 instance's public IP address.
*   Your EC2 instance's key pair (`.pem` file).

**2. Connect to your EC2 instance:**

*   Open a terminal or command prompt.
*   Use the `ssh` command to connect to your instance:
    ```bash
    ssh -i /path/to/your-key.pem ubuntu@your-ec2-public-ip
    ```
    *   Replace `/path/to/your-key.pem` with the actual path to your `.pem` file.
    *   Replace `your-ec2-public-ip` with your instance's public IP address.

**3. Install dependencies:**

*   Update the package list:
    ```bash
    sudo apt-get update
    ```
*   Install Node.js and npm:
    ```bash
    curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
    sudo apt-get install -y nodejs
    ```
*   Install git:
    ```bash
    sudo apt-get install -y git
    ```

**4. Clone your repository:**

*   Clone your repository from GitHub:
    ```bash
    git clone https://github.com/yash2607/nageshwaram_school.git
    ```

**5. Install application dependencies:**

*   Navigate to the backend directory of your project:
    ```bash
    cd nageshwaram_school/website/backend
    ```
*   Install the npm packages:
    ```bash
    npm install
    ```

**6. Start your application:**

*   Start your Node.js server:
    ```bash
    node server.js
    ```
    *   Your application should now be running on port 3001. You can check this by opening a new terminal and running `curl http://localhost:3001`.

**7. Keep your application running:**

*   To keep your application running in the background, use a process manager like `pm2`.
*   Install `pm2`:
    ```bash
    sudo npm install -g pm2
    ```
*   Start your application with `pm2`:
    ```bash
    pm2 start server.js
    ```
*   To make `pm2` automatically restart your application on server reboot, run:
    ```bash
    pm2 startup
    ```
    *   `pm2` will provide you with a command to run. Copy and paste that command into your terminal and run it.

**8. Configure Nginx as a reverse proxy:**

*   Install Nginx:
    ```bash
    sudo apt-get install -y nginx
    ```
*   Create a new Nginx configuration file:
    ```bash
    sudo nano /etc/nginx/sites-available/nageshwaram_school
    ```
*   Paste the following configuration into the file:
    ```nginx
    server {
        listen 80;
        server_name your-ec2-public-ip;

        location / {
            proxy_pass http://localhost:3001;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection 'upgrade';
            proxy_set_header Host $host;
            proxy_cache_bypass $http_upgrade;
        }
    }
    ```
    *   Replace `your-ec2-public-ip` with your instance's public IP address.
*   Enable the new configuration by creating a symbolic link:
    ```bash
    sudo ln -s /etc/nginx/sites-available/nageshwaram_school /etc/nginx/sites-enabled
    ```
*   Test your Nginx configuration:
    ```bash
    sudo nginx -t
    ```
*   Restart Nginx to apply the changes:
    ```bash
    sudo systemctl restart nginx
    ```

Your website should now be accessible from your EC2 instance's public IP address in your web browser.

**9. Automated Deployment with GitHub Actions:**

The steps above are for the initial manual setup of your server. After the initial setup, every push to the `master` branch of your GitHub repository will automatically trigger a deployment to your EC2 instance.

The deployment process is defined in the `.github/workflows/deploy.yml` file in your repository. It uses GitHub Actions to:

*   Check out your code.
*   SSH into your EC2 instance.
*   Pull the latest changes from your repository.
*   Install any new dependencies.
*   Restart your application using `pm2`.

To enable this, you need to add the following secrets to your GitHub repository's settings:

*   `EC2_HOST`: Your EC2 instance's public IP address.
*   `EC2_USERNAME`: The username for your EC2 instance (e.g., `ubuntu`).
*   `EC2_KEY`: The content of your `.pem` file (your private key).